#+title: Practice problems

This directory is designed to be "org-published". The idea is to have org files that setup practice problems with links to solutions.


#+BEGIN_SRC emacs-lisp :results silent

(defun ox-ipynb-publish-practice (plist filename pub-dir)
  "Publish an org-file to a Jupyter notebook."
  (let ((buf-open (find-buffer-visiting filename))
	(buf (find-file-noselect filename)))
    (with-current-buffer buf

      (let* ((ox-ipynb-preprocess-hook
	      (append ox-ipynb-preprocess-hook
		      `((lambda ()
			  (goto-char (point-max))

			  (insert (format "\n\n* Solutions\n\n [[https://github.com/jkitchin/f21-06623/blob/master/practice/%s][Click here for the solution]]"
					  ,(file-name-nondirectory (concat (file-name-sans-extension filename) ".ipynb")))))
			ox-ipynb-remove-hidden
			ox-ipynb-remove-solution
			ox-ipynb-remove-remove)))
	     (output (ox-ipynb-export-to-ipynb-file)))
	(org-publish-attachment plist (expand-file-name output) pub-dir)
	(unless buf-open (kill-buffer buf))
	output))))

(defun ox-ipynb-publish-solution (plist filename pub-dir)
  "Publish an org-file to a Jupyter notebook."
  (let ((buf-open (find-buffer-visiting filename))
	(buf (find-file-noselect filename)))
    (with-current-buffer buf
      (let* ((output (ox-ipynb-export-to-ipynb-file)))
	(org-publish-attachment plist (expand-file-name output) pub-dir)
	(unless buf-open (kill-buffer buf))
	output))))


(setq org-publish-project-alist
      '(("orgfiles"
         :base-directory "/Volumes/GoogleDrive/My Drive/classes/f21-06623/f21-06623/f21-06623/practice/"
         :base-extension "org"
         :publishing-directory "/Volumes/GoogleDrive/My Drive/classes/f21-06623/f21-06623/f21-06623/practice/notebooks"
         :publishing-function  ox-ipynb-publish-practice)

	("solutions"
	 :base-directory "/Volumes/GoogleDrive/My Drive/classes/f21-06623/f21-06623/f21-06623/practice/"
         :base-extension "org"
         :publishing-directory "/Volumes/GoogleDrive/My Drive/classes/f21-06623/f21-06623/f21-06623/practice/solutions"
	 ;; Change this... to making the functions
	 :publishing-function  ox-ipynb-publish-solution)

	("practice" :components ("orgfiles" "solutions"))))


(org-publish "practice" t)

(shell-command "git config advice.addIgnoredFile false")
(shell-command "git add *")
(shell-command "git commit -am \"published updates\"")
(shell-command "git push")
#+END_SRC
